
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="这是Simon,Sally和James的博客，分享和记录我们的学习和生活！！">
      
      
        <meta name="author" content="Simon Zhan">
      
      
        <link rel="canonical" href="https://blog.simon29.com/Discuz%E7%AC%94%E8%AE%B0/%E5%BC%80%E5%8F%91%E2%80%94%E4%BA%A7%E5%93%81%E6%A1%86%E6%9E%B6/">
      
      
        <link rel="prev" href="../%E5%BC%80%E5%8F%91-%E6%A8%A1%E6%9D%BF%E6%9C%BA%E5%88%B6/">
      
      
        <link rel="next" href="../%E8%BF%90%E7%BB%B4-%E5%8D%87%E7%BA%A7%E6%90%AC%E5%AE%B6/">
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>开发—产品框架 - Simon's Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Simon&#39;s Blog" class="md-header__button md-logo" aria-label="Simon's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M99.1 105.4C79 114 68.2 127.2 65.2 144.8c-2.4 14.1-.7 23.2 2 29.4 2.8 6.3 7.9 12.4 16.7 18.6 19.2 13.4 48.3 22.1 84.9 32.5 1 .3 1.9.6 2.9.8 32.7 9.3 72 20.6 100.9 40.7 15.7 10.9 29.9 25.5 38.6 45.1 8.8 19.8 10.8 42 6.6 66.3-7.3 42.5-35.3 71.7-71.8 87.3-35.4 15.2-79.1 17.9-123.7 10.9h-.2c-24-3.9-62.7-17.1-87.6-25.6-4.8-1.7-9.2-3.1-12.8-4.3-16.6-5.7-25.6-23.8-20.1-40.6s23.7-25.8 40.5-20.3Q49.45 388 58 391c25.4 8.6 56.4 19.2 74.4 22.1 36.8 5.7 67.5 2.5 88.5-6.5 20.1-8.6 30.8-21.8 33.9-39.4 2.4-14.1.7-23.2-2-29.4-2.8-6.3-7.9-12.4-16.7-18.6-19.2-13.4-48.3-22.1-84.9-32.5-1-.3-1.9-.6-2.9-.8-32.7-9.3-72-20.6-100.9-40.7-15.7-10.9-29.9-25.5-38.6-45.1-8.8-19.8-10.8-42-6.6-66.3l31.5 5.5-31.6-5.4c7.3-42.5 35.3-71.7 71.8-87.3 35.4-15.2 79.1-17.9 123.7-10.9 13 2 52.4 9.6 66.6 13.4 17.1 4.5 27.2 22.1 22.7 39.2s-22.1 27.2-39.2 22.7c-11.2-3-48.1-10.2-60.1-12l4.9-31.5-4.9 31.5c-36.9-5.8-67.5-2.5-88.6 6.5z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Simon's Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              开发—产品框架
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  欢迎页

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../about/" class="md-tabs__link">
        
  
  
    
  
  关于我

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../%E5%8D%9A%E6%96%87%E7%BC%96%E5%86%99%E6%8C%87%E5%8D%97/" class="md-tabs__link">
        
  
  
    
  
  博文编写指南

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../%E5%BC%80%E5%8F%91-%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6/" class="md-tabs__link">
          
  
  
    
  
  Discuz笔记

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../JamesProgram/Program%20of%202025/" class="md-tabs__link">
          
  
  
    
  
  JamesProgram

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Material%20MkDocs%E5%AD%A6%E4%B9%A0/0%20%E6%8E%92%E7%89%88%E6%A8%A1%E5%9D%97%E6%A0%B7%E4%BE%8B/" class="md-tabs__link">
          
  
  
    
  
  Material MkDocs学习

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../dev/python-101/" class="md-tabs__link">
          
  
  
    
  
  技术开发

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../python-101.md" class="md-tabs__link">
          
  
  
    
  
  技术开发

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../python-101.md" class="md-tabs__link">
          
  
  
    
  
  技术开发

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E5%AD%A6%E8%8B%B1%E8%AF%AD/Vocabulary%20building/" class="md-tabs__link">
          
  
  
    
  
  学英语

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Simon&#39;s Blog" class="md-nav__button md-logo" aria-label="Simon's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M99.1 105.4C79 114 68.2 127.2 65.2 144.8c-2.4 14.1-.7 23.2 2 29.4 2.8 6.3 7.9 12.4 16.7 18.6 19.2 13.4 48.3 22.1 84.9 32.5 1 .3 1.9.6 2.9.8 32.7 9.3 72 20.6 100.9 40.7 15.7 10.9 29.9 25.5 38.6 45.1 8.8 19.8 10.8 42 6.6 66.3-7.3 42.5-35.3 71.7-71.8 87.3-35.4 15.2-79.1 17.9-123.7 10.9h-.2c-24-3.9-62.7-17.1-87.6-25.6-4.8-1.7-9.2-3.1-12.8-4.3-16.6-5.7-25.6-23.8-20.1-40.6s23.7-25.8 40.5-20.3Q49.45 388 58 391c25.4 8.6 56.4 19.2 74.4 22.1 36.8 5.7 67.5 2.5 88.5-6.5 20.1-8.6 30.8-21.8 33.9-39.4 2.4-14.1.7-23.2-2-29.4-2.8-6.3-7.9-12.4-16.7-18.6-19.2-13.4-48.3-22.1-84.9-32.5-1-.3-1.9-.6-2.9-.8-32.7-9.3-72-20.6-100.9-40.7-15.7-10.9-29.9-25.5-38.6-45.1-8.8-19.8-10.8-42-6.6-66.3l31.5 5.5-31.6-5.4c7.3-42.5 35.3-71.7 71.8-87.3 35.4-15.2 79.1-17.9 123.7-10.9 13 2 52.4 9.6 66.6 13.4 17.1 4.5 27.2 22.1 22.7 39.2s-22.1 27.2-39.2 22.7c-11.2-3-48.1-10.2-60.1-12l4.9-31.5-4.9 31.5c-36.9-5.8-67.5-2.5-88.6 6.5z"/></svg>

    </a>
    Simon's Blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    欢迎页
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于我
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%8D%9A%E6%96%87%E7%BC%96%E5%86%99%E6%8C%87%E5%8D%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    博文编写指南
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Discuz笔记
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Discuz笔记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91-%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    开发-插件机制
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91-%E6%95%B0%E5%AD%97%E5%AD%97%E5%85%B8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    开发—数字字典
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91-%E6%A8%A1%E6%9D%BF%E6%9C%BA%E5%88%B6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    开发 - 模板机制
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    开发—产品框架
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    开发—产品框架
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-mvc" class="md-nav__link">
    <span class="md-ellipsis">
      1. MVC架构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. MVC架构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-mvc_1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 什么是MVC架构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-mvc" class="md-nav__link">
    <span class="md-ellipsis">
      2. MVC主要解决的问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-discuz-mvc" class="md-nav__link">
    <span class="md-ellipsis">
      3. Discuz! 如何体现 MVC 架构设计？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-discuz-mvc" class="md-nav__link">
    <span class="md-ellipsis">
      4. 总结：Discuz! 的 MVC 架构实践特征
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-discuz" class="md-nav__link">
    <span class="md-ellipsis">
      2. Discuz! 的目录架构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Discuz! 的目录架构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 根目录各文件夹功能总览
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 根目录文件（站点入口级别）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-discuz-x34-mvc" class="md-nav__link">
    <span class="md-ellipsis">
      3. Discuz! X3.4 MVC 架构逻辑图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 自动加载
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 自动加载">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-autoload" class="md-nav__link">
    <span class="md-ellipsis">
      1. 什么是自动加载（Autoload）？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-discuz_1" class="md-nav__link">
    <span class="md-ellipsis">
      2. Discuz！如何实现自动加载的？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-class_corephp" class="md-nav__link">
    <span class="md-ellipsis">
      4. 核心文件 class_core.php 的作用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 核心文件 class_core.php 的作用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 位置及功能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ct" class="md-nav__link">
    <span class="md-ellipsis">
      2. C::t() 是什么？为什么常见？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      3. 类加载机制总结（请求流程）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-db" class="md-nav__link">
    <span class="md-ellipsis">
      5. 数据库访问层（DB层）的设计与安全
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6. 模板机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. 模板机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-template" class="md-nav__link">
    <span class="md-ellipsis">
      1. 模板加载机制（基于 template() 函数）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-htm-php" class="md-nav__link">
    <span class="md-ellipsis">
      2. 模板文件格式支持：.htm 和 .php
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      3. 模板语法详解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 模板缓存机制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5. 模板开发的实践规范建议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      7. 缓存机制设计
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. 缓存机制设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      1. 总体设计目标
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-config_globalphp" class="md-nav__link">
    <span class="md-ellipsis">
      2. 支持的缓存驱动类型（在 config_global.php 中配置）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-discuz_memory-discuz_table" class="md-nav__link">
    <span class="md-ellipsis">
      3. 缓存实现的核心结构：discuz_memory 与 discuz_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-discuz_table" class="md-nav__link">
    <span class="md-ellipsis">
      4. discuz_table 中的缓存操作方法（自动 + 手动）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    <span class="md-ellipsis">
      5. 插件表类同样可支持缓存
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_1" class="md-nav__link">
    <span class="md-ellipsis">
      6. 缓存刷新机制与失效策略
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7_1" class="md-nav__link">
    <span class="md-ellipsis">
      7. 缓存开发实践建议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      8. 后台页面开发
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. 后台页面开发">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      1. 后台页面开发的设计理念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-x35" class="md-nav__link">
    <span class="md-ellipsis">
      2. 后台页面开发完整流程（X3.5 环境）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-x35" class="md-nav__link">
    <span class="md-ellipsis">
      3. 常用后台开发函数汇总（X3.5 全版本通用）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      4. 后台页面开发最佳实践建议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_2" class="md-nav__link">
    <span class="md-ellipsis">
      5. 插件后台开发入口说明（补充）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-discuz-x35" class="md-nav__link">
    <span class="md-ellipsis">
      6. 总结：Discuz! X3.5 后台开发机制核心优势
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4-%E5%8D%87%E7%BA%A7%E6%90%AC%E5%AE%B6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    运维-转换/升级/搬家
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4-%E6%89%A9%E5%B1%95%E6%9C%8D%E5%8A%A1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    运维-扩展服务
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E7%BB%B4-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    运维 —— 环境搭建
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E8%90%A5-%E5%89%8D%E5%8F%B0%E5%8A%9F%E8%83%BD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    前台功能
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%BF%90%E8%90%A5-%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    后台管理
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    JamesProgram
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            JamesProgram
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../JamesProgram/Program%20of%202025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Program of 2025
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Material MkDocs学习
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Material MkDocs学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Material%20MkDocs%E5%AD%A6%E4%B9%A0/0%20%E6%8E%92%E7%89%88%E6%A8%A1%E5%9D%97%E6%A0%B7%E4%BE%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    排版模块样例
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Material%20MkDocs%E5%AD%A6%E4%B9%A0/1%20%E6%95%B4%E4%BD%93%E4%BB%8B%E7%BB%8D/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    概述
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Material%20MkDocs%E5%AD%A6%E4%B9%A0/2%20%E5%AE%9E%E9%99%85%E5%AE%89%E8%A3%85/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    实际安装
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Material%20MkDocs%E5%AD%A6%E4%B9%A0/3%20%E5%88%9B%E5%BB%BA%E4%BD%A0%E7%9A%84%E7%AB%99%E7%82%B9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    创建你的站点
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Material%20MkDocs%E5%AD%A6%E4%B9%A0/4%20%E5%8F%91%E5%B8%83%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    发布你的网站
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Material%20MkDocs%E5%AD%A6%E4%B9%A0/5.%20%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BD%A0%E7%9A%84%E4%B8%BB%E9%A2%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    自定义你的主题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Material%20MkDocs%E5%AD%A6%E4%B9%A0/6%20%E6%96%87%E6%A1%A3%E7%AC%A6%E5%90%88%E8%AF%B4%E6%98%8E/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    文档符号约定
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../blog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    技术开发
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            技术开发
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/python-101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python 入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/ai-infra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI 部署实践
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    技术开发
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            技术开发
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python-101.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python 入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-infra.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI 部署实践
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    技术开发
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            技术开发
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python-101.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python 入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-infra.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI 部署实践
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    学英语
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            学英语
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%AD%A6%E8%8B%B1%E8%AF%AD/Vocabulary%20building/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vocabulary Building 2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%AD%A6%E8%8B%B1%E8%AF%AD/%E6%AF%8F%E6%97%A5%E5%86%99%E4%BD%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    每日写作
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-mvc" class="md-nav__link">
    <span class="md-ellipsis">
      1. MVC架构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. MVC架构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-mvc_1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 什么是MVC架构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-mvc" class="md-nav__link">
    <span class="md-ellipsis">
      2. MVC主要解决的问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-discuz-mvc" class="md-nav__link">
    <span class="md-ellipsis">
      3. Discuz! 如何体现 MVC 架构设计？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-discuz-mvc" class="md-nav__link">
    <span class="md-ellipsis">
      4. 总结：Discuz! 的 MVC 架构实践特征
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-discuz" class="md-nav__link">
    <span class="md-ellipsis">
      2. Discuz! 的目录架构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Discuz! 的目录架构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 根目录各文件夹功能总览
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 根目录文件（站点入口级别）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-discuz-x34-mvc" class="md-nav__link">
    <span class="md-ellipsis">
      3. Discuz! X3.4 MVC 架构逻辑图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 自动加载
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 自动加载">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-autoload" class="md-nav__link">
    <span class="md-ellipsis">
      1. 什么是自动加载（Autoload）？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-discuz_1" class="md-nav__link">
    <span class="md-ellipsis">
      2. Discuz！如何实现自动加载的？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-class_corephp" class="md-nav__link">
    <span class="md-ellipsis">
      4. 核心文件 class_core.php 的作用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 核心文件 class_core.php 的作用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 位置及功能
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ct" class="md-nav__link">
    <span class="md-ellipsis">
      2. C::t() 是什么？为什么常见？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      3. 类加载机制总结（请求流程）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-db" class="md-nav__link">
    <span class="md-ellipsis">
      5. 数据库访问层（DB层）的设计与安全
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6. 模板机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. 模板机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-template" class="md-nav__link">
    <span class="md-ellipsis">
      1. 模板加载机制（基于 template() 函数）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-htm-php" class="md-nav__link">
    <span class="md-ellipsis">
      2. 模板文件格式支持：.htm 和 .php
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      3. 模板语法详解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 模板缓存机制
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5. 模板开发的实践规范建议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      7. 缓存机制设计
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. 缓存机制设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      1. 总体设计目标
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-config_globalphp" class="md-nav__link">
    <span class="md-ellipsis">
      2. 支持的缓存驱动类型（在 config_global.php 中配置）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-discuz_memory-discuz_table" class="md-nav__link">
    <span class="md-ellipsis">
      3. 缓存实现的核心结构：discuz_memory 与 discuz_table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-discuz_table" class="md-nav__link">
    <span class="md-ellipsis">
      4. discuz_table 中的缓存操作方法（自动 + 手动）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    <span class="md-ellipsis">
      5. 插件表类同样可支持缓存
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6_1" class="md-nav__link">
    <span class="md-ellipsis">
      6. 缓存刷新机制与失效策略
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7_1" class="md-nav__link">
    <span class="md-ellipsis">
      7. 缓存开发实践建议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      8. 后台页面开发
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. 后台页面开发">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      1. 后台页面开发的设计理念
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-x35" class="md-nav__link">
    <span class="md-ellipsis">
      2. 后台页面开发完整流程（X3.5 环境）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-x35" class="md-nav__link">
    <span class="md-ellipsis">
      3. 常用后台开发函数汇总（X3.5 全版本通用）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      4. 后台页面开发最佳实践建议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_2" class="md-nav__link">
    <span class="md-ellipsis">
      5. 插件后台开发入口说明（补充）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-discuz-x35" class="md-nav__link">
    <span class="md-ellipsis">
      6. 总结：Discuz! X3.5 后台开发机制核心优势
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="_1">开发—产品框架<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="1-mvc">1. MVC架构<a class="headerlink" href="#1-mvc" title="Permanent link">&para;</a></h2>
<h3 id="1-mvc_1">1. 什么是MVC架构<a class="headerlink" href="#1-mvc_1" title="Permanent link">&para;</a></h3>
<p>MVC 是 Model-View-Controller 的缩写，是软件架构中的一种经典分层模式，其核心思想是：将业务逻辑（M）、界面展示（V）与请求控制（C）分离，从而实现代码解耦、职责清晰、易于维护和扩展。</p>
<table>
<thead>
<tr>
<th style="text-align: left;">层级</th>
<th style="text-align: left;">名称</th>
<th style="text-align: left;">职责说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">M（模型）</td>
<td style="text-align: left;">Model</td>
<td style="text-align: left;">数据层：处理数据结构、数据库操作、业务逻辑，如获取用户、帖子、积分</td>
</tr>
<tr>
<td style="text-align: left;">V（视图）</td>
<td style="text-align: left;">View</td>
<td style="text-align: left;">展示层：将数据渲染成前端界面，如 HTML 模板、JS</td>
</tr>
<tr>
<td style="text-align: left;">C（控制器）</td>
<td style="text-align: left;">Controller</td>
<td style="text-align: left;">控制层：接收请求，调度模型与视图，如帖子详情逻辑控制、数据分页等</td>
</tr>
</tbody>
</table>
<h3 id="2-mvc">2. MVC主要解决的问题<a class="headerlink" href="#2-mvc" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">问题</th>
<th style="text-align: left;">MVC 的解决方式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">HTML/PHP 混杂、难维护</td>
<td style="text-align: left;">分离 V 与 C，模板与逻辑隔离</td>
</tr>
<tr>
<td style="text-align: left;">数据调用与控制逻辑耦合</td>
<td style="text-align: left;">Model 独立，统一封装数据访问</td>
</tr>
<tr>
<td style="text-align: left;">页面增改影响全局代码</td>
<td style="text-align: left;">Controller 层级分发，模块可独立开发</td>
</tr>
<tr>
<td style="text-align: left;">团队协作混乱（设计、开发分工）</td>
<td style="text-align: left;">前端关注 View，后端关注 M+C</td>
</tr>
</tbody>
</table>
<h3 id="3-discuz-mvc">3. Discuz! 如何体现 MVC 架构设计？<a class="headerlink" href="#3-discuz-mvc" title="Permanent link">&para;</a></h3>
<p>Discuz! 虽然不是严格的面向对象 MVC 框架（如 Laravel、Symfony），但它采用了 <strong>“文件路径级” 的轻量 MVC 实现</strong>，非常适合高性能需求场景。</p>
<ol>
<li>
<p>Model：数据层（位于 source/class/、function/）</p>
</li>
<li>
<p>所有数据库操作通过封装的 C::t() 调用数据表类，如：</p>
</li>
</ol>
<div class="language-php highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="x">C::t(&#39;forum_thread&#39;)-&gt;fetch($tid);  // 获取主题</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="x">C::t(&#39;common_member&#39;)-&gt;update($uid, $data);  // 更新用户</span>
</span></code></pre></div>
<ul>
<li>传统函数式操作放在 source/function/function_*.php 中，如：</li>
</ul>
<div class="language-php highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="x">function getuserbyuid($uid) { return DB::fetch_first(...); }</span>
</span></code></pre></div>
<ol>
<li>
<p>View：视图层（位于 template/）</p>
</li>
<li>
<p>所有前端页面结构使用 .htm 模板文件，如：</p>
</li>
</ol>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">template</span><span class="o">/</span><span class="k">default</span><span class="o">/</span><span class="n">forum</span><span class="o">/</span><span class="n">viewthread</span><span class="p">.</span><span class="n">htm</span><span class="w">   </span><span class="c1">// 主题阅读页模板</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="k">template</span><span class="o">/</span><span class="k">default</span><span class="o">/</span><span class="n">common</span><span class="o">/</span><span class="n">header</span><span class="p">.</span><span class="n">htm</span><span class="w">      </span><span class="c1">// 站点头部模板</span>
</span></code></pre></div>
<ul>
<li>模板变量通过 template::assign() 或 PHP 渲染注入：</li>
</ul>
<div class="language-html highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;user&quot;</span><span class="p">&gt;</span>{$member[&#39;username&#39;]}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></code></pre></div>
<ul>
<li>
<p>支持多语言 {lang xxx}、条件判断 {if}、模板嵌套 {subtemplate} 等语法。</p>
</li>
<li>
<p>Controller：控制器层（位于 source/module/ 或 include/）</p>
</li>
<li>
<p>控制器按模块划分（forum、portal、group 等）：</p>
</li>
</ul>
<div class="language-arduino highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">source</span><span class="o">/</span><span class="k">module</span><span class="o">/</span><span class="n">forum</span><span class="o">/</span><span class="n">forum_viewthread</span><span class="p">.</span><span class="n">php</span><span class="w">  </span><span class="c1">// 主题页控制器</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">source</span><span class="o">/</span><span class="k">module</span><span class="o">/</span><span class="n">member</span><span class="o">/</span><span class="n">member_login</span><span class="p">.</span><span class="n">php</span><span class="w">     </span><span class="c1">// 登录控制器</span>
</span></code></pre></div>
<ul>
<li>每个入口文件（如 forum.php）解析参数后引入具体控制器：</li>
</ul>
<div class="language-php highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="x">require libfile(&#39;function/forum&#39;);</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="x">require libfile(&#39;forum/viewthread&#39;, &#39;module&#39;);  // 加载 viewthread 控制器</span>
</span></code></pre></div>
<ul>
<li>控制器中负责处理用户请求、调用模型、加载模板：</li>
</ul>
<div class="language-php highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="x">$thread = C::t(&#39;forum_thread&#39;)-&gt;fetch($tid);</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="x">include template(&#39;forum/viewthread&#39;);  // 渲染页面</span>
</span></code></pre></div>
<h3 id="4-discuz-mvc">4. 总结：Discuz! 的 MVC 架构实践特征<a class="headerlink" href="#4-discuz-mvc" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">特性</th>
<th style="text-align: left;">实现方式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">控制器路径分发</td>
<td style="text-align: left;">forum.php?id=viewthread → source/module/forum/forum_viewthread.php</td>
</tr>
<tr>
<td style="text-align: left;">模型类封装</td>
<td style="text-align: left;">source/class/table/table_xxx.php + C::t() 调用</td>
</tr>
<tr>
<td style="text-align: left;">模板系统</td>
<td style="text-align: left;">.htm + {} 语法 + template() 函数</td>
</tr>
<tr>
<td style="text-align: left;">轻量、文件驱动</td>
<td style="text-align: left;">不使用复杂 OOP，仅用路径、数组、函数组织逻辑</td>
</tr>
<tr>
<td style="text-align: left;">插件机制</td>
<td style="text-align: left;">插件挂钩点执行自有 C+V 逻辑，不改动核心</td>
</tr>
</tbody>
</table>
<h2 id="2-discuz">2. Discuz! 的目录架构<a class="headerlink" href="#2-discuz" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>根目录文件夹</th>
<th>根目录文件</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="" src="../assets/2025-05-10-17-54-13.png" /></td>
<td><img alt="" src="../assets/2025-05-10-17-54-44.png" /></td>
</tr>
</tbody>
</table>
<h3 id="1">1. 根目录各文件夹功能总览<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">目录名</th>
<th style="text-align: left;">用途分类</th>
<th style="text-align: left;">功能说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">api/</td>
<td style="text-align: left;">接口控制层</td>
<td style="text-align: left;">📌 Discuz! 与外部通信的 API 控制器，如 QQ 登录、UCenter 回调、支付网关等；访问入口为 api.php</td>
</tr>
<tr>
<td style="text-align: left;">archiver/</td>
<td style="text-align: left;">纯文本归档</td>
<td style="text-align: left;">📄 提供论坛页面的纯 HTML 快速阅读版本，适合搜索引擎抓取及低流量展示；访问如：/archiver/tid-123.html</td>
</tr>
<tr>
<td style="text-align: left;">config/</td>
<td style="text-align: left;">系统配置文件</td>
<td style="text-align: left;">🔧 存放数据库、UCenter 等全局配置文件，主要有 config_global.php 和 config_ucenter.php，安装过程中生成</td>
</tr>
<tr>
<td style="text-align: left;">data/</td>
<td style="text-align: left;">可写运行数据</td>
<td style="text-align: left;">💾 运行期缓存、附件、模板编译结果、日志等全部写入此目录，必须具有写权限</td>
</tr>
<tr>
<td style="text-align: left;">install/</td>
<td style="text-align: left;">安装逻辑入口</td>
<td style="text-align: left;">📦 Discuz! 安装程序目录（含 SQL 和页面），安装完成后应删除或限制访问；首次部署或升级执行此处逻辑</td>
</tr>
<tr>
<td style="text-align: left;">source/</td>
<td style="text-align: left;">核心程序代码</td>
<td style="text-align: left;">🧠 主程序逻辑目录，包含控制器（forum、portal）、类库、插件、函数、语言包等，是 Discuz! 的 MVC 中枢</td>
</tr>
<tr>
<td style="text-align: left;">static/</td>
<td style="text-align: left;">静态资源</td>
<td style="text-align: left;">🎨 存放全局静态文件，如 JS、CSS、默认图片等；模板通过 {STATICURL} 标签引用</td>
</tr>
<tr>
<td style="text-align: left;">template/</td>
<td style="text-align: left;">前端模板</td>
<td style="text-align: left;">🧾 存放风格文件夹，每个目录对应一个模板套件；默认目录为 default/，可在后台切换风格</td>
</tr>
<tr>
<td style="text-align: left;">uc_client/</td>
<td style="text-align: left;">UCenter 客户端</td>
<td style="text-align: left;">🔗 与 uc_server 通信的 SDK（提供接口封装），用于登录、注册、同步登出等；供主程序调用</td>
</tr>
<tr>
<td style="text-align: left;">uc_server/</td>
<td style="text-align: left;">UCenter 服务端</td>
<td style="text-align: left;">🧩 独立运行的用户中心模块，支持跨站点统一用户认证、通信接口、积分同步、应用管理等</td>
</tr>
</tbody>
</table>
<p><strong>关键目录: source/：</strong> 逻辑核心目录，结构化清晰:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">子目录</th>
<th style="text-align: left;">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">admincp/</td>
<td style="text-align: left;">后台控制器（如 setting、plugin 管理）</td>
</tr>
<tr>
<td style="text-align: left;">class/</td>
<td style="text-align: left;">所有核心类库（分页、缓存、表单处理）</td>
</tr>
<tr>
<td style="text-align: left;">function/</td>
<td style="text-align: left;">系统函数集合（如 function_core.php 为主入口）</td>
</tr>
<tr>
<td style="text-align: left;">include/</td>
<td style="text-align: left;">前台模块调度逻辑入口，如论坛帖子展示逻辑</td>
</tr>
<tr>
<td style="text-align: left;">module/</td>
<td style="text-align: left;">子模块细分控制器，如 module/forum/viewthread.php</td>
</tr>
<tr>
<td style="text-align: left;">plugin/</td>
<td style="text-align: left;">插件系统注册与挂载逻辑</td>
</tr>
<tr>
<td style="text-align: left;">language/</td>
<td style="text-align: left;">系统语言包，按模块划分，支持国际化</td>
</tr>
<tr>
<td style="text-align: left;">discuz_version.php</td>
<td style="text-align: left;">当前程序版本声明文件</td>
</tr>
</tbody>
</table>
<p><strong>data/：</strong> 运行期依赖目录（必须可写）</p>
<table>
<thead>
<tr>
<th style="text-align: left;">子目录</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">attachment/</td>
<td style="text-align: left;">上传的文件与图片</td>
</tr>
<tr>
<td style="text-align: left;">cache/</td>
<td style="text-align: left;">存储全站配置、权限、导航、hook 缓存</td>
</tr>
<tr>
<td style="text-align: left;">template/</td>
<td style="text-align: left;">生成的模板缓存 .tpl.php</td>
</tr>
<tr>
<td style="text-align: left;">log/</td>
<td style="text-align: left;">错误日志和任务日志</td>
</tr>
<tr>
<td style="text-align: left;">threadcache/</td>
<td style="text-align: left;">浏览缓存（纯文本），提高帖子响应速度</td>
</tr>
<tr>
<td style="text-align: left;">diy/</td>
<td style="text-align: left;">DIY 模块缓存</td>
</tr>
<tr>
<td style="text-align: left;">plugindata/</td>
<td style="text-align: left;">插件缓存与配置数据</td>
</tr>
<tr>
<td style="text-align: left;">install.lock</td>
<td style="text-align: left;">安装锁，防止重复安装</td>
</tr>
<tr>
<td style="text-align: left;">update.lock</td>
<td style="text-align: left;">升级锁，避免脚本被二次运行</td>
</tr>
<tr>
<td style="text-align: left;">sendmail.lock</td>
<td style="text-align: left;">邮件频率限制锁文件</td>
</tr>
</tbody>
</table>
<p><strong>config/ 配置目录（初始化关键）</strong> </p>
<table>
<thead>
<tr>
<th style="text-align: left;">文件</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">config_global.php</td>
<td style="text-align: left;">✅ 全站全局配置，数据库连接、缓存方式、路径配置、站点名等都在这里（必读）</td>
</tr>
<tr>
<td style="text-align: left;">config_ucenter.php</td>
<td style="text-align: left;">✅ UCenter 配置文件，包含通信密钥、接口地址</td>
</tr>
<tr>
<td style="text-align: left;">*_default.php 文件</td>
<td style="text-align: left;">📄 默认配置模板，用于初始化生成 config 文件</td>
</tr>
</tbody>
</table>
<p>Discuz! 在安装阶段会根据 default 模板生成 config_global.php 与 config_ucenter.php，其中 $_config['db'] 与 $_config['cache'] 是插件开发、性能调优的重点配置对象。</p>
<p><strong>install/ 安装系统目录</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">目录</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">data/</td>
<td style="text-align: left;">安装过程使用的 SQL 模板</td>
</tr>
<tr>
<td style="text-align: left;">include/</td>
<td style="text-align: left;">安装控制器逻辑</td>
</tr>
<tr>
<td style="text-align: left;">static/</td>
<td style="text-align: left;">安装界面用到的 CSS/JS</td>
</tr>
</tbody>
</table>
<p>安装完成后应删除该目录或设置访问限制。</p>
<p><strong>template/ 模板目录（前端展示）</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">目录</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">default/</td>
<td style="text-align: left;">默认风格模板目录（包含 forum_viewthread.htm 等）</td>
</tr>
<tr>
<td style="text-align: left;">index.htm</td>
<td style="text-align: left;">占位页</td>
</tr>
</tbody>
</table>
<p><strong>static/ 静态资源目录（前端 CSS/JS）</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">子目录</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">js/</td>
<td style="text-align: left;">JS 脚本库（如 jQuery、common.js）</td>
</tr>
<tr>
<td style="text-align: left;">image/</td>
<td style="text-align: left;">默认图片、图标、按钮</td>
</tr>
<tr>
<td style="text-align: left;">avatar/</td>
<td style="text-align: left;">头像相关静态图标</td>
</tr>
<tr>
<td style="text-align: left;">topic/ / space/</td>
<td style="text-align: left;">专题页和个人空间的样式资源</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<h3 id="2">2. 根目录文件（站点入口级别）<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">文件/目录</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">index.php</td>
<td style="text-align: left;">📌 Discuz! 前台主入口，论坛首页、门户、群组的调度入口（基于模块控制）</td>
</tr>
<tr>
<td style="text-align: left;">forum.php</td>
<td style="text-align: left;">📌 论坛页面入口（跳转至论坛首页、板块、主题页等）</td>
</tr>
<tr>
<td style="text-align: left;">portal.php</td>
<td style="text-align: left;">📌 门户系统入口（门户频道、文章、专题）</td>
</tr>
<tr>
<td style="text-align: left;">group.php</td>
<td style="text-align: left;">📌 群组系统入口</td>
</tr>
<tr>
<td style="text-align: left;">plugin.php</td>
<td style="text-align: left;">📌 插件系统前台入口：plugin.php?id=xxx 加载插件逻辑</td>
</tr>
<tr>
<td style="text-align: left;">member.php</td>
<td style="text-align: left;">📌 用户系统入口（登录、注册、找回密码）</td>
</tr>
<tr>
<td style="text-align: left;">search.php</td>
<td style="text-align: left;">📌 全站搜索入口</td>
</tr>
<tr>
<td style="text-align: left;">admin.php</td>
<td style="text-align: left;">⚠️ 后台管理中心入口（配合后台验证）</td>
</tr>
<tr>
<td style="text-align: left;">api.php</td>
<td style="text-align: left;">📌 第三方 API 接口控制入口（如 UCenter 回调）</td>
</tr>
<tr>
<td style="text-align: left;">connect.php</td>
<td style="text-align: left;">📌 QQ 登录 / 微信登录相关入口（依赖配置和插件）</td>
</tr>
<tr>
<td style="text-align: left;">robots.txt</td>
<td style="text-align: left;">🤖 搜索引擎爬虫限制策略文件</td>
</tr>
</tbody>
</table>
<h3 id="3-discuz-x34-mvc">3. Discuz! X3.4 MVC 架构逻辑图<a class="headerlink" href="#3-discuz-x34-mvc" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>                    +----------------------+
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>                    |  用户请求 (浏览器)   |
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>                    +----------+-----------+
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>                               |
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>         请求路径如 forum.php?id=viewthread
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>                               |
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>                               v
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>              +-----------------------------+
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>              |  入口文件 (forum.php等)     |
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>              +-----------------------------+
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>                               |
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>                根据模块名加载控制器 (C层)
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>                               |
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>                               v
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>       +-------------------------------------------------+
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>       | 控制器文件：source/module/forum/forum_viewthread.php |
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>       +-------------------------------------------------+
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>                               |
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>                获取业务数据，调用模型类（M层）
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>                               |
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>                               v
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>       +------------------------------------------------+
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>       | 模型类（数据表类）：                           |
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>       | source/class/table/table_forum_thread.php       |
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>       | 调用方式：C::t(&#39;forum_thread&#39;)-&gt;fetch($tid)     |
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>       +------------------------------------------------+
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>                               |
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>                  渲染视图，调用模板系统（V层）
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>                               |
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>                               v
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>         +-------------------------------------------+
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>         | 模板文件：template/default/forum/         |
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a>         |           viewthread.htm                   |
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a>         | 模板变量如：{$thread[&#39;subject&#39;]}           |
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a>         +-------------------------------------------+
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a>                              插件挂载点
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a>                               |
</span><span id="__span-7-39"><a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a>            +------------------+------------------+
</span><span id="__span-7-40"><a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a>            | Hook 调用执行插件逻辑                |
</span><span id="__span-7-41"><a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a>            | 通过 source/plugin/ 加载控制器/模板 |
</span><span id="__span-7-42"><a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>            +--------------------------------------+
</span></code></pre></div>
<p><strong>说明：</strong></p>
<ul>
<li>控制器（Controller）：<code>source/module/</code> 下的文件根据请求参数动态引入；</li>
<li>模型（Model）：数据层封装在 <code>source/class/table/</code> 中，以 <code>C::t('table_name')</code> 调用；</li>
<li>视图（View）：模板文件位于 <code>template/</code>，支持语言包、模板变量、标签语法；</li>
<li>插件机制通过 Hook 与模板嵌入，可无侵入扩展功能。</li>
</ul>
<h2 id="3">3. 自动加载<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<h3 id="1-autoload">1. 什么是自动加载（Autoload）？<a class="headerlink" href="#1-autoload" title="Permanent link">&para;</a></h3>
<p>在传统 PHP 中，每次用到类都要 <code>include</code> 或 <code>require</code> 文件，麻烦又易出错。<br />
PHP 5+ 引入了 <code>__autoload()</code> 和 <code>spl_autoload_register()</code>，允许自动加载类定义文件，Discuz! 正是利用这一机制构建类调用的“懒加载”系统。</p>
<h3 id="2-discuz_1">2. Discuz！如何实现自动加载的？<a class="headerlink" href="#2-discuz_1" title="Permanent link">&para;</a></h3>
<p>位于 source/class/class_core.php 中（X3.4/3.5 均保留）：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="x">if(function_exists(&#39;spl_autoload_register&#39;)) {</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="x">    spl_autoload_register(array(&#39;core&#39;, &#39;autoload&#39;));</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="x">} else {</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="x">    function __autoload($class) {</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="x">        return core::autoload($class);</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="x">    }</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="x">}</span>
</span></code></pre></div>
<p><strong>解释：</strong></p>
<ul>
<li>注册一个自动加载回调函数：core::autoload()；</li>
<li>当你调用一个还没 include 的类时，PHP 会自动调用这个函数；</li>
<li>如果类存在并命名规范，自动加载器会在 source/class/ 下找到它。</li>
</ul>
<p><strong>示例：</strong> 加载 discuz_table 类时无需手动 include</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="x">$table = new discuz_table();  // 自动加载 source/class/discuz/discuz_table.php</span>
</span></code></pre></div>
<h2 id="4-class_corephp">4. 核心文件 class_core.php 的作用<a class="headerlink" href="#4-class_corephp" title="Permanent link">&para;</a></h2>
<h3 id="1_1">1. 位置及功能<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>source/class/class_core.php
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">功能</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">注册自动加载器</td>
<td style="text-align: left;">spl_autoload_register(array('core','autoload'))</td>
</tr>
<tr>
<td style="text-align: left;">注册异常处理器</td>
<td style="text-align: left;">捕获 fatal error、抛出更友好的错误提示</td>
</tr>
<tr>
<td style="text-align: left;">初始化缓存内存机制</td>
<td style="text-align: left;">调用 discuz_memory 初始化 Redis / Memcache 等支持</td>
</tr>
<tr>
<td style="text-align: left;">定义简写类映射</td>
<td style="text-align: left;">class C extends core {} / class DB extends discuz_database {}</td>
</tr>
<tr>
<td style="text-align: left;">启动核心应用 discuz_application</td>
<td style="text-align: left;">框架主引导类，处理配置加载、数据库连接、用户 session 初始化等</td>
</tr>
</tbody>
</table>
<h3 id="2-ct">2. C::t() 是什么？为什么常见？<a class="headerlink" href="#2-ct" title="Permanent link">&para;</a></h3>
<p>这是 Discuz! 框架设计中的核心 <strong>“数据访问封装机制”</strong> ，用于操作**数据库表对象（Model层）** 。</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="x">C::t(&#39;forum_thread&#39;)-&gt;fetch($tid);  // 获取主题数据</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="x">C::t(&#39;common_member&#39;)-&gt;update($uid, array(&#39;credits&#39; =&gt; 100));  // 更新用户积分</span>
</span></code></pre></div>
<p>等价于：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="x">$class = new table_forum_thread();</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="x">$class-&gt;fetch($tid);</span>
</span></code></pre></div>
<p><strong>原理：</strong> <br />
- C 是 core 的别名类：class C extends core {}；<br />
- C::t() 会自动实例化并缓存指定表的数据类，如 table_forum_thread；<br />
- 类文件位于：source/class/table/table_forum_thread.php；<br />
- 继承自 discuz_table，内部封装了 DB::insert()、DB::fetch_first() 等操作。</p>
<p><strong>简写类映射的意义（让代码更优雅）</strong> </p>
<p>在 class_core.php 中：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="x">class C extends core {}  // 便于调用 C::t()、C::memory()</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="x">class DB extends discuz_database {}  // 快速调用数据库操作</span>
</span></code></pre></div>
<p>这样可以写出：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="x">C::t(&#39;forum_post&#39;)-&gt;insert(...);  // 代替 core::t()</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="x">DB::insert(&#39;forum_thread&#39;, $data);  // 代替 discuz_database::insert()</span>
</span></code></pre></div>
<h3 id="3_1">3. 类加载机制总结（请求流程）<a class="headerlink" href="#3_1" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>用户访问 forum.php?id=viewthread
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>↓
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>载入 class_core.php
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>↓
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>注册自动加载器、内存系统、配置项
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>↓
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>初始化 discuz_application（加载 config、env、setting）
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>↓
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>通过 C::t() 加载模型类
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>↓
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>调用 DB 封装的 SQL 操作
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>↓
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>加载模板渲染输出
</span></code></pre></div>
<h2 id="5-db">5. 数据库访问层（DB层）的设计与安全<a class="headerlink" href="#5-db" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th style="text-align: left;">目的</th>
<th style="text-align: left;">Discuz! 的实现方式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">统一访问方式</td>
<td style="text-align: left;">引入 C::t('表名')-&gt;方法() 调用机制</td>
</tr>
<tr>
<td style="text-align: left;">避免直接 SQL 注入</td>
<td style="text-align: left;">格式化语法 + 安全处理器（如 %s, %d, %n）</td>
</tr>
<tr>
<td style="text-align: left;">模型层代码解耦</td>
<td style="text-align: left;">每个表一个 table_*.php 类，集中封装逻辑</td>
</tr>
<tr>
<td style="text-align: left;">插件调用不影响主系统</td>
<td style="text-align: left;">支持 C::t('#插件ID#表名') 结构调用插件表</td>
</tr>
</tbody>
</table>
<p><strong>对 insert()、update()、delete() 方法的处理逻辑</strong></p>
<p>只有“数组形式”的参数会自动转义:</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="x">// 安全：自动处理</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="x">DB::insert(&#39;common_member&#39;, array(&#39;username&#39; =&gt; &#39;admin&#39;, &#39;email&#39; =&gt; &#39;x@x.com&#39;));</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="x">// 不安全：开发者需自行处理</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="x">DB::query(&quot;INSERT INTO %t SET username=&#39;%s&#39;&quot;, array(&#39;common_member&#39;, addslashes($name)));</span>
</span></code></pre></div>
<p><strong>C::t() 数据表类机制（标准调用模型）</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">项目</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">每张表都有对应的 table_*.php 文件</td>
<td style="text-align: left;">位于 source/class/table/</td>
</tr>
<tr>
<td style="text-align: left;">类名以 table_表名 命名（不含前缀）</td>
<td style="text-align: left;">如 table_common_member</td>
</tr>
<tr>
<td style="text-align: left;">所有类都继承自 discuz_table</td>
<td style="text-align: left;">提供 fetch、insert、update 等基本操作</td>
</tr>
<tr>
<td style="text-align: left;">主键字段在类构造中通过 _pk 指定</td>
<td style="text-align: left;">无主键表需设置为 ''</td>
</tr>
<tr>
<td style="text-align: left;">通过 C::t('表名')-&gt;方法() 调用</td>
<td style="text-align: left;">统一接口风格，增强插件可移植性</td>
</tr>
</tbody>
</table>
<p>实际使用示例：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="x">// 获取单个用户</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="x">$user = C::t(&#39;common_member&#39;)-&gt;fetch($uid);</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="x">// 获取多个用户，以 uid 为 key</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="x">$list = C::t(&#39;common_member&#39;)-&gt;fetch_all(array(1,2,3));</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="x">// 插入记录</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="x">C::t(&#39;common_member&#39;)-&gt;insert(array(&#39;uid&#39;=&gt;123, &#39;username&#39;=&gt;&#39;test&#39;), false, true);</span>
</span></code></pre></div>
<p><strong>插件中如何使用 C::t()</strong></p>
<p>Discuz! 支持插件私有的数据表类调用，方式如下：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">项目</th>
<th style="text-align: left;">值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">表名</td>
<td style="text-align: left;">mytablename（不带前缀）</td>
</tr>
<tr>
<td style="text-align: left;">所在路径</td>
<td style="text-align: left;">source/plugin/mypluginid/table/table_mytablename.php</td>
</tr>
<tr>
<td style="text-align: left;">类名</td>
<td style="text-align: left;">table_mytablename</td>
</tr>
<tr>
<td style="text-align: left;">调用方法</td>
<td style="text-align: left;">C::t('#mypluginid#mytablename')-&gt;method()</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="x">// 插件ID为 myplugin，表名为 mytablename</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="x">$data = C::t(&#39;#myplugin#mytablename&#39;)-&gt;fetch_by_uid($uid);</span>
</span></code></pre></div>
<h2 id="6">6. 模板机制<a class="headerlink" href="#6" title="Permanent link">&para;</a></h2>
<h3 id="1-template">1. 模板加载机制（基于 template() 函数）<a class="headerlink" href="#1-template" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">步骤</th>
<th style="text-align: left;">行为</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">1️⃣</td>
<td style="text-align: left;">根据参数查找对应的模板文件路径：template/default/forum/viewthread.htm 或 .php</td>
</tr>
<tr>
<td style="text-align: left;">2️⃣</td>
<td style="text-align: left;">检查是否已有缓存文件：data/template/*.tpl.php</td>
</tr>
<tr>
<td style="text-align: left;">3️⃣</td>
<td style="text-align: left;">判断模板文件是否修改，若有修改则重新解析为 PHP 模板缓存</td>
</tr>
<tr>
<td style="text-align: left;">4️⃣</td>
<td style="text-align: left;">返回已编译的 PHP 文件路径并执行</td>
</tr>
<tr>
<td style="text-align: left;">5️⃣</td>
<td style="text-align: left;">模板文件中存在嵌套、变量、条件逻辑等，渲染最终 HTML</td>
</tr>
</tbody>
</table>
<p>编译后的模板 PHP 文件放在：data/template/，可通过清除缓存强制刷新。</p>
<h3 id="2-htm-php">2. 模板文件格式支持：.htm 和 .php<a class="headerlink" href="#2-htm-php" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>.htm 模板文件（默认）</p>
</li>
<li>
<p>放置于 template/default/ 或其他风格目录；</p>
</li>
<li>使用 {} 语法表示变量、控制结构、嵌套模板等；</li>
<li>
<p>需要由系统模板引擎编译为 .tpl.php 再执行。</p>
</li>
<li>
<p>.php 模板文件（优先）</p>
</li>
<li>
<p>若模板目录下存在同名 .php 模板，将优先使用 .php；</p>
</li>
<li>仅需添加一行注释 &lt;?php exit;?&gt; 作为头部；</li>
<li>第二行及后面才是模板语法内容。</li>
</ol>
<div class="language-php highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="cp">&lt;?php</span> <span class="k">exit</span><span class="p">;</span><span class="cp">?&gt;</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="x">&lt;!--{eval echo &#39;这是PHP模板&#39;;}--&gt;</span>
</span></code></pre></div>
<p>.php 模板允许嵌入原生 PHP，更适合高度定制化、低频调用页面（如错误页、管理面板）。</p>
<h3 id="3_2">3. 模板语法详解<a class="headerlink" href="#3_2" title="Permanent link">&para;</a></h3>
<p><strong>1. 变量输出</strong></p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>{$username}         <span class="cm">&lt;!-- 输出变量 --&gt;</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>{$user[&#39;uid&#39;]}      <span class="cm">&lt;!-- 输出数组 --&gt;</span>
</span></code></pre></div>
<p>建议始终使用 {} 包裹变量，避免与原生 HTML 冲突。</p>
<p><strong>2. 条件判断</strong></p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="cm">&lt;!--{if $is_admin}--&gt;</span> 欢迎管理员 <span class="cm">&lt;!--{/if}--&gt;</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="cm">&lt;!--{if $score &gt; 90}--&gt;</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>  优秀
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="cm">&lt;!--{elseif $score &gt; 60}--&gt;</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>  及格
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="cm">&lt;!--{else}--&gt;</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>  不及格
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="cm">&lt;!--{/if}--&gt;</span>
</span></code></pre></div>
<p><strong>3. 循环语句</strong></p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="cm">&lt;!--{loop $posts $post}--&gt;</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{$post[&#39;author&#39;]}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="cm">&lt;!--{/loop}--&gt;</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="cm">&lt;!--{loop $users $uid $user}--&gt;</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{$uid}: {$user[&#39;username&#39;]}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="cm">&lt;!--{/loop}--&gt;</span>
</span></code></pre></div>
<p><strong>4. 模板嵌套</strong></p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="cm">&lt;!--{subtemplate common/header}--&gt;</span>   <span class="cm">&lt;!-- 编译时直接合并 --&gt;</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="cm">&lt;!--{template common/footer}--&gt;</span>      <span class="cm">&lt;!-- 运行时 include 调用 --&gt;</span>
</span></code></pre></div>
<p><strong>5. 插件钩子</strong></p>
<p>Discuz 通过 Hook 插件机制允许开发者“注入前端模板 HTML 片段”。</p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="cm">&lt;!--{hook/forumdisplay_top}--&gt;</span>
</span></code></pre></div>
<p>插件若注册此 Hook，在渲染模板时会将插件 HTML 内容自动插入此位置。</p>
<p><strong>6. eval 原生 PHP 调用</strong></p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="cm">&lt;!--{eval $now = date(&#39;Y-m-d&#39;);}--&gt;</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="cm">&lt;!--{eval echo $now;}--&gt;</span>
</span></code></pre></div>
<p>应谨慎使用 {eval}，避免输出不可控变量，增加 XSS 风险。</p>
<p><strong>7. 语言包调用</strong></p>
<div class="language-html highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>{lang index_yesterday}
</span></code></pre></div>
<p>Discuz 会自动从语言包文件加载对应文本：</p>
<ul>
<li>路径如：source/language/lang_template.php</li>
<li>数据结构为：$lang['index_yesterday'] = '昨天';</li>
</ul>
<h3 id="4">4. 模板缓存机制<a class="headerlink" href="#4" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">文件类型</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">.htm 模板源文件</td>
<td style="text-align: left;">位于 template/ 目录，开发者编辑此文件</td>
</tr>
<tr>
<td style="text-align: left;">.tpl.php 缓存</td>
<td style="text-align: left;">位于 data/template/，自动生成的可执行 PHP 模板</td>
</tr>
<tr>
<td style="text-align: left;">缓存刷新</td>
<td style="text-align: left;">后台“更新缓存”或删除 data/template/ 手动刷新</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<p>Discuz 会自动比对 .htm 文件的修改时间，决定是否重新编译缓存。</p>
<h3 id="5">5. 模板开发的实践规范建议<a class="headerlink" href="#5" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">目标</th>
<th style="text-align: left;">建议做法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">自定义页面风格</td>
<td style="text-align: left;">创建新模板目录，如 template/mytheme/，并在后台启用</td>
</tr>
<tr>
<td style="text-align: left;">插件输出样式自定义</td>
<td style="text-align: left;">使用 hook 模板片段 + 语言包分离</td>
</tr>
<tr>
<td style="text-align: left;">安全防护</td>
<td style="text-align: left;">禁止使用未过滤变量直接输出、eval 中使用外部数据</td>
</tr>
<tr>
<td style="text-align: left;">多语言支持</td>
<td style="text-align: left;">模板中只写 {lang xx}，文字放入语言包文件</td>
</tr>
<tr>
<td style="text-align: left;">不要写逻辑到模板中</td>
<td style="text-align: left;">复杂判断应尽量放到控制器处理后传值过来</td>
</tr>
</tbody>
</table>
<h2 id="7">7. 缓存机制设计<a class="headerlink" href="#7" title="Permanent link">&para;</a></h2>
<h3 id="1_2">1. 总体设计目标<a class="headerlink" href="#1_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">目标</th>
<th style="text-align: left;">实现方式说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">提升页面访问性能</td>
<td style="text-align: left;">页面碎片、用户信息、帖子等热点数据缓存</td>
</tr>
<tr>
<td style="text-align: left;">减少数据库请求压力</td>
<td style="text-align: left;">使用内存级缓存优先读取，数据库为回源</td>
</tr>
<tr>
<td style="text-align: left;">支持灵活缓存策略</td>
<td style="text-align: left;">可选 file/sql/memcache/redis 等引擎</td>
</tr>
<tr>
<td style="text-align: left;">支持数据缓存自动同步</td>
<td style="text-align: left;">数据表类（Model）自动更新缓存项</td>
</tr>
<tr>
<td style="text-align: left;">插件可接入缓存机制</td>
<td style="text-align: left;">插件表类继承 discuz_table 即可接入缓存</td>
</tr>
</tbody>
</table>
<h3 id="2-config_globalphp">2. 支持的缓存驱动类型（在 config_global.php 中配置）<a class="headerlink" href="#2-config_globalphp" title="Permanent link">&para;</a></h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="x">$_config[&#39;cache&#39;][&#39;type&#39;] = &#39;file&#39;;     // 文件缓存（默认）</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="x">$_config[&#39;cache&#39;][&#39;type&#39;] = &#39;sql&#39;;      // 数据库缓存（小型站点）</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="x">$_config[&#39;cache&#39;][&#39;type&#39;] = &#39;memcache&#39;; // 分布式 Memcache（需安装）</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="x">$_config[&#39;cache&#39;][&#39;type&#39;] = &#39;redis&#39;;    // 推荐方式，性能更好</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: left;">驱动类型</th>
<th style="text-align: left;">推荐使用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">file</td>
<td style="text-align: left;">默认，适合轻量环境</td>
</tr>
<tr>
<td style="text-align: left;">sql</td>
<td style="text-align: left;">MySQL 直接缓存，性能差</td>
</tr>
<tr>
<td style="text-align: left;">memcache</td>
<td style="text-align: left;">多节点站点可选</td>
</tr>
<tr>
<td style="text-align: left;">redis</td>
<td style="text-align: left;">✅ 推荐，多站/分布式环境最优</td>
</tr>
</tbody>
</table>
<h3 id="3-discuz_memory-discuz_table">3. 缓存实现的核心结构：discuz_memory 与 discuz_table<a class="headerlink" href="#3-discuz_memory-discuz_table" title="Permanent link">&para;</a></h3>
<ol>
<li>discuz_memory：缓存控制类</li>
</ol>
<p>文件位置：source/class/discuz/discuz_memory.php</p>
<p>实现了 Memcache/Redis/File/Sql 缓存操作的统一封装；<br />
类似于缓存引擎适配器；<br />
自动检测环境，按优先级选择可用驱动；<br />
调用方式：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="x">C::memory()-&gt;get(&#39;thread_123&#39;);        // 读取缓存</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="x">C::memory()-&gt;set(&#39;thread_123&#39;, $data); // 设置缓存</span>
</span></code></pre></div>
<ol>
<li>discuz_table：数据表基类，模型级缓存入口</li>
</ol>
<p>所有表类继承此类，例如：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="x">class table_common_member extends discuz_table {</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="x">    protected $_table = &#39;common_member&#39;;</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="x">    protected $_pk    = &#39;uid&#39;;</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="x">    protected $_pre_cache_key = &#39;common_member_&#39;;</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="x">    protected $_cache_ttl = 600; // 缓存时间（秒）</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="x">}</span>
</span></code></pre></div>
<p>内部机制：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">属性名称</th>
<th style="text-align: left;">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">$_pre_cache_key</td>
<td style="text-align: left;">缓存键前缀，例如 'common_member_'</td>
</tr>
<tr>
<td style="text-align: left;">$_cache_ttl</td>
<td style="text-align: left;">缓存时长，单位秒（如 600 秒）</td>
</tr>
</tbody>
</table>
<h3 id="4-discuz_table">4. discuz_table 中的缓存操作方法（自动 + 手动）<a class="headerlink" href="#4-discuz_table" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">方法名</th>
<th style="text-align: left;">功能说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">fetch_cache($ids)</td>
<td style="text-align: left;">获取缓存（支持多个主键）</td>
</tr>
<tr>
<td style="text-align: left;">store_cache($id, $data)</td>
<td style="text-align: left;">存入缓存，指定 KEY</td>
</tr>
<tr>
<td style="text-align: left;">clear_cache($ids)</td>
<td style="text-align: left;">清除缓存</td>
</tr>
<tr>
<td style="text-align: left;">update_cache($id, $data)</td>
<td style="text-align: left;">更新缓存字段值</td>
</tr>
<tr>
<td style="text-align: left;">reset_cache($ids)</td>
<td style="text-align: left;">重置已有 key 的完整值</td>
</tr>
<tr>
<td style="text-align: left;">increase_cache($ids, $arr)</td>
<td style="text-align: left;">累加缓存中的字段值</td>
</tr>
</tbody>
</table>
<p>说明：</p>
<p>当你调用 C::t('common_member')-&gt;fetch($uid)，如果设置了缓存：</p>
<ul>
<li>会先从缓存中获取；</li>
<li>若不存在，再查数据库，并写入缓存；</li>
<li>更新（update()）时，会自动同步更新缓存。</li>
</ul>
<h3 id="5_1">5. 插件表类同样可支持缓存<a class="headerlink" href="#5_1" title="Permanent link">&para;</a></h3>
<p>插件开发者只要按以下写法即可集成缓存机制：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="x">// source/plugin/myplugin/table/table_mytablename.php</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="x">class table_mytablename extends discuz_table {</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="x">    protected $_table = &#39;plugin_mytable&#39;;</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="x">    protected $_pk = &#39;id&#39;;</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="x">    protected $_pre_cache_key = &#39;myplugin_mytablename_&#39;;</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="x">    protected $_cache_ttl = 300;</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="x">}</span>
</span></code></pre></div>
<p>使用：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="x">$data = C::t(&#39;#myplugin#mytablename&#39;)-&gt;fetch($id);       // 自动从缓存获取</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="x">C::t(&#39;#myplugin#mytablename&#39;)-&gt;update($id, $arr);        // 自动同步缓存</span>
</span></code></pre></div>
<h3 id="6_1">6. 缓存刷新机制与失效策略<a class="headerlink" href="#6_1" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">场景</th>
<th style="text-align: left;">缓存是否自动更新</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">insert() 插入新数据</td>
<td style="text-align: left;">❌ 需手动更新</td>
</tr>
<tr>
<td style="text-align: left;">update() 修改主键行</td>
<td style="text-align: left;">✅ 自动更新</td>
</tr>
<tr>
<td style="text-align: left;">delete() 删除主键行</td>
<td style="text-align: left;">✅ 自动清除</td>
</tr>
<tr>
<td style="text-align: left;">非主键字段变动影响逻辑</td>
<td style="text-align: left;">❌ 需开发者手动清理或禁用缓存</td>
</tr>
<tr>
<td style="text-align: left;">自定义缓存如 store_cache</td>
<td style="text-align: left;">需自行控制</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<h3 id="7_1">7. 缓存开发实践建议<a class="headerlink" href="#7_1" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">目标</th>
<th style="text-align: left;">建议实现方式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">性能优化热点数据表</td>
<td style="text-align: left;">启用 _pre_cache_key、合理设置 TTL</td>
</tr>
<tr>
<td style="text-align: left;">多页帖子避免缓存过多</td>
<td style="text-align: left;">仅缓存第一页（post_{$tid}_1）</td>
</tr>
<tr>
<td style="text-align: left;">插件表类接入缓存</td>
<td style="text-align: left;">继承 discuz_table 并设置缓存键</td>
</tr>
<tr>
<td style="text-align: left;">缓存清理</td>
<td style="text-align: left;">用 clear_cache() / update_cache()</td>
</tr>
<tr>
<td style="text-align: left;">页面片段缓存（视图层）</td>
<td style="text-align: left;">可使用 block 或插件缓存中间层</td>
</tr>
</tbody>
</table>
<h2 id="8">8.  后台页面开发<a class="headerlink" href="#8" title="Permanent link">&para;</a></h2>
<h3 id="1_3">1. 后台页面开发的设计理念<a class="headerlink" href="#1_3" title="Permanent link">&para;</a></h3>
<p>Discuz! 的后台采用的是“模块化 + 权限校验 + 语言分离”的轻量 MVC 风格，其特点包括：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">特性</th>
<th style="text-align: left;">实现机制</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">模块独立分发</td>
<td style="text-align: left;">每个 admincp_xxx.php 文件对应一个后台模块</td>
</tr>
<tr>
<td style="text-align: left;">安全检查机制</td>
<td style="text-align: left;">所有后台模块必须通过 IN_ADMINCP 校验</td>
</tr>
<tr>
<td style="text-align: left;">菜单自动识别与语言分离</td>
<td style="text-align: left;">所有菜单、按钮文字、提示均使用语言包</td>
</tr>
<tr>
<td style="text-align: left;">表单渲染自动化</td>
<td style="text-align: left;">使用 showsetting()、cpmsg() 等函数统一布局样式</td>
</tr>
</tbody>
</table>
<h3 id="2-x35">2. 后台页面开发完整流程（X3.5 环境）<a class="headerlink" href="#2-x35" title="Permanent link">&para;</a></h3>
<ol>
<li>添加菜单项</li>
</ol>
<p>文件： <code>source/admincp/menu/menu_mynav.php</code><br />
示例：</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="x">$menu[&#39;global&#39;][] = array(&#39;menu_mynav_mytest&#39;, &#39;mynav_mytest&#39;);</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="x">$GLOBALS[&#39;admincp_actions_normal&#39;][] = &#39;mynav&#39;;</span>
</span></code></pre></div>
<ul>
<li>'menu_mynav_mytest' 是语言包 key；</li>
<li>
<p>'mynav_mytest' 映射后台访问链接： <code>admin.php?action=mynav&amp;operation=mytest</code></p>
</li>
<li>
<p>创建语言包</p>
</li>
</ul>
<p>文件： <code>source/language/lang_admincp_mynav.php</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="x">$extend_lang = array(</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="x">    &#39;menu_mynav_mytest&#39; =&gt; &#39;我的测试功能&#39;,</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="x">);</span>
</span></code></pre></div>
<ol>
<li>创建后台逻辑控制器</li>
</ol>
<p>文件： <code>source/admincp/admincp_mynav.php</code></p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="cp">&lt;?php</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">defined</span><span class="p">(</span><span class="s1">&#39;IN_DISCUZ&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nb">defined</span><span class="p">(</span><span class="s1">&#39;IN_ADMINCP&#39;</span><span class="p">))</span> <span class="p">{</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>    <span class="k">exit</span><span class="p">(</span><span class="s1">&#39;Access Denied&#39;</span><span class="p">);</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="p">}</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="k">if</span><span class="p">(</span><span class="nv">$operation</span> <span class="o">==</span> <span class="s1">&#39;mytest&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>    <span class="nx">shownav</span><span class="p">(</span><span class="s1">&#39;global&#39;</span><span class="p">,</span> <span class="s1">&#39;menu_mynav_mytest&#39;</span><span class="p">);</span> <span class="c1">// 面包屑导航</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>    <span class="nx">showsubmenu</span><span class="p">(</span><span class="s1">&#39;我的功能标题&#39;</span><span class="p">);</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a>    <span class="nx">showformheader</span><span class="p">(</span><span class="s1">&#39;mynav&amp;operation=mytest&#39;</span><span class="p">);</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a>    <span class="nx">showtableheader</span><span class="p">(</span><span class="s1">&#39;功能设置&#39;</span><span class="p">);</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a>    <span class="nx">showsetting</span><span class="p">(</span><span class="s1">&#39;setting_basic_bbname&#39;</span><span class="p">,</span> <span class="s1">&#39;settingnew[bbname]&#39;</span><span class="p">,</span> <span class="nv">$setting</span><span class="p">[</span><span class="s1">&#39;bbname&#39;</span><span class="p">],</span> <span class="s1">&#39;text&#39;</span><span class="p">);</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>    <span class="nx">showsetting</span><span class="p">(</span><span class="s1">&#39;setting_basic_boardlicensed&#39;</span><span class="p">,</span> <span class="s1">&#39;settingnew[boardlicensed]&#39;</span><span class="p">,</span> <span class="nv">$setting</span><span class="p">[</span><span class="s1">&#39;boardlicensed&#39;</span><span class="p">],</span> <span class="s1">&#39;radio&#39;</span><span class="p">);</span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>    <span class="nx">showtablefooter</span><span class="p">();</span>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a>    <span class="nx">showsubmit</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">);</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a>    <span class="nx">showformfooter</span><span class="p">();</span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="3-x35">3. 常用后台开发函数汇总（X3.5 全版本通用）<a class="headerlink" href="#3-x35" title="Permanent link">&para;</a></h3>
<ol>
<li>表单相关</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align: left;">函数</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">showformheader()</td>
<td style="text-align: left;">输出 <form> 开头</td>
</tr>
<tr>
<td style="text-align: left;">showformfooter()</td>
<td style="text-align: left;">输出 </form> 结尾</td>
</tr>
<tr>
<td style="text-align: left;">showsetting()</td>
<td style="text-align: left;">输出一行表单项（文本、单选、多选等）</td>
</tr>
<tr>
<td style="text-align: left;">showhiddenfields()</td>
<td style="text-align: left;">输出 <input type="hidden"></td>
</tr>
<tr>
<td style="text-align: left;">showsubmit()</td>
<td style="text-align: left;">输出提交按钮</td>
</tr>
</tbody>
</table>
<p>示例：高级多选框</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="x">showsetting(&#39;setting_access_register_status&#39;, array(&#39;settingnew[regstatus]&#39;, array(</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="x">    array(&#39;open&#39;, $lang[&#39;setting_access_register_open&#39;]),</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="x">    array(&#39;invite&#39;, $lang[&#39;setting_access_register_invite&#39;], &#39;showinvite&#39;),</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="x">    $_G[&#39;setting&#39;][&#39;connect&#39;][&#39;allow&#39;] ? array(&#39;connect&#39;, $lang[&#39;setting_access_register_connect&#39;], &#39;showconnect&#39;) : array(),</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="x">)), $regstatus, &#39;mcheckbox&#39;);</span>
</span></code></pre></div>
<ol>
<li>表格与数据列表</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align: left;">函数</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">showtableheader()</td>
<td style="text-align: left;">输出 <table> 开头</td>
</tr>
<tr>
<td style="text-align: left;">showtablerow()</td>
<td style="text-align: left;">输出 <tr> 表格行</td>
</tr>
<tr>
<td style="text-align: left;">showtablefooter()</td>
<td style="text-align: left;">输出 </table></td>
</tr>
</tbody>
</table>
<p>示例：输出多行用户列表</p>
<div class="language-php highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="x">showtableheader(&#39;用户列表&#39;);</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="x">foreach($userlist as $user) {</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="x">    showtablerow(&#39;&#39;, array(&#39;class=&quot;td25&quot;&#39;, &#39;class=&quot;td28&quot;&#39;), array(</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="x">        &#39;&lt;input type=&quot;checkbox&quot; name=&quot;delete[]&quot; value=&quot;&#39;.$user[&#39;uid&#39;].&#39;&quot; /&gt;&#39;,</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="x">        &#39;&lt;input type=&quot;text&quot; name=&quot;displayordernew[&#39;.$user[&#39;uid&#39;].&#39;]&quot; value=&quot;0&quot; /&gt;&#39;,</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="x">        $user[&#39;username&#39;],</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="x">    ));</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="x">}</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="x">showtablefooter();</span>
</span></code></pre></div>
<ol>
<li>页面结构与导航</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align: left;">函数</th>
<th style="text-align: left;">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">shownav()</td>
<td style="text-align: left;">页面面包屑导航结构</td>
</tr>
<tr>
<td style="text-align: left;">showsubmenu()</td>
<td style="text-align: left;">二级菜单导航栏</td>
</tr>
</tbody>
</table>
<ol>
<li>消息提示</li>
</ol>
<div class="language-php highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="x">cpmsg(&#39;tasks_installed&#39;, &#39;action=tasks&amp;operation=type&#39;, &#39;succeed&#39;);</span>
</span></code></pre></div>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">参数</th>
<th style="text-align: left;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">'message'</td>
<td style="text-align: left;">语言包 key</td>
</tr>
<tr>
<td style="text-align: left;">'url'</td>
<td style="text-align: left;">跳转地址</td>
</tr>
<tr>
<td style="text-align: left;">'type'</td>
<td style="text-align: left;">succeed, error, loadingform, download</td>
</tr>
</tbody>
</table>
<h3 id="4_1">4. 后台页面开发最佳实践建议<a class="headerlink" href="#4_1" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">场景</th>
<th style="text-align: left;">建议</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">插件中使用后台页面</td>
<td style="text-align: left;">放入 source/plugin/yourid/admincp_*.php</td>
</tr>
<tr>
<td style="text-align: left;">添加后台菜单</td>
<td style="text-align: left;">使用 menu 文件 + 语言包自动识别机制</td>
</tr>
<tr>
<td style="text-align: left;">页面权限校验</td>
<td style="text-align: left;">强制判断 IN_ADMINCP 常量</td>
</tr>
<tr>
<td style="text-align: left;">语言多样性</td>
<td style="text-align: left;">所有显示文字必须从语言包提取</td>
</tr>
<tr>
<td style="text-align: left;">与表单结合存储配置</td>
<td style="text-align: left;">使用 C::config() 或 updatecache() 更新</td>
</tr>
</tbody>
</table>
<h3 id="5_2">5. 插件后台开发入口说明（补充）<a class="headerlink" href="#5_2" title="Permanent link">&para;</a></h3>
<p>插件后台页面逻辑文件可放在以下位置：</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>source/plugin/yourpluginid/admincp.inc.php<span class="w">          </span><span class="c1"># 插件后台入口</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>source/plugin/yourpluginid/admin/setting.inc.php<span class="w">    </span><span class="c1"># 后台分模块页面</span>
</span></code></pre></div>
<p>插件调用后台页面的地址格式：</p>
<div class="language-arduino highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="n">admin</span><span class="p">.</span><span class="n">php</span><span class="o">?</span><span class="n">action</span><span class="o">=</span><span class="n">plugins</span><span class="o">&amp;</span><span class="n">operation</span><span class="o">=</span><span class="nf">config</span><span class="o">&amp;</span><span class="k">do</span><span class="o">=</span><span class="n">插件ID</span><span class="o">&amp;</span><span class="n">identifier</span><span class="o">=</span><span class="n">插件ID</span><span class="o">&amp;</span><span class="n">pmod</span><span class="o">=</span><span class="n">setting</span>
</span></code></pre></div>
<h3 id="6-discuz-x35">6. 总结：Discuz! X3.5 后台开发机制核心优势<a class="headerlink" href="#6-discuz-x35" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">特性</th>
<th style="text-align: left;">实现方式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">菜单注册 + 权限注册</td>
<td style="text-align: left;">menu_xxx.php + lang_admincp_xxx.php</td>
</tr>
<tr>
<td style="text-align: left;">表单构建自动化</td>
<td style="text-align: left;">showsetting()、showformheader() 等</td>
</tr>
<tr>
<td style="text-align: left;">安全机制完善</td>
<td style="text-align: left;">IN_ADMINCP 防止非法访问</td>
</tr>
<tr>
<td style="text-align: left;">插件扩展兼容性强</td>
<td style="text-align: left;">后台页面可独立挂载或作为核心模块扩展</td>
</tr>
<tr>
<td style="text-align: left;">UI一致性与自动语言</td>
<td style="text-align: left;">所有元素统一样式，支持多语言包</td>
</tr>
</tbody>
</table>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../%E5%BC%80%E5%8F%91-%E6%A8%A1%E6%9D%BF%E6%9C%BA%E5%88%B6/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 开发 - 模板机制">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                开发 - 模板机制
              </div>
            </div>
          </a>
        
        
          
          <a href="../%E8%BF%90%E7%BB%B4-%E5%8D%87%E7%BA%A7%E6%90%AC%E5%AE%B6/" class="md-footer__link md-footer__link--next" aria-label="Next: 运维-转换/升级/搬家">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                运维-转换/升级/搬家
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 - 2025 Simon
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/squidfunk" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/r/squidfunk/mkdocs-material/" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/mkdocs-material/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://bsky.app/profile/squidfunk.bsky.social" target="_blank" rel="noopener" title="bsky.app" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2 42.1-31.6 110.3-56 110.3 21.8 0 15.5-8.9 130.5-14.1 149.2-18.2 64.8-84.4 81.4-143.3 71.3C456 322 482.2 380 425.6 438c-107.4 110.2-154.3-27.6-166.3-62.9-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8c-12 35.3-59 173.1-166.3 62.9-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1 10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"/></svg>
    </a>
  
    
    
      
    
    
    
      
      
    
    <a href="https://fosstodon.org/@squidfunk" target="_blank" rel="noopener me" title="fosstodon.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.5 102.5 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5m-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/squidfunk" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>